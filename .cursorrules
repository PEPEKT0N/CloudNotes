# CloudNotes Project

## Описание
Приложение заметок на языке markdown с облачной синхронизацией. Будет разработана десктопная и веб версия приложения. 

Стили markdown должны будут применяться сразу после ввода. Например, пользователь вводит «Символ решетки», 
ставит пробел, и тут же автоматически применяются стили для заголовка первого уровня. Также будут кнопки, 
которые позволяют использовать стили в том месте, где находится каретка для ввода, это для тех кто не знает md.

## Основной стек:

- Клиент (desktop): Avalonia UI, markdig (парсер md), Entity Framework Core (SQLite)
- Сервер: [ASP.NET](http://ASP.NET) Core, EF Core,  [asp.net](http://asp.net) Core Identity (аутентификация пользователей
- БД: PostgrSQL (может хранить json в полях, в теории может пригодиться)
- Веб-версия: React + TypeScript
- Паттерн MVVM

## Основная составляющая проекта
1. Хранение заметок в формате .md
    - нужно хранить заметки локально (в файлах или БД);
    - нужен парсер и рендерер Markdown;
2. Облачная синхронизация 
    - сервер (хранение и выдача заметок через  API);
    - механизм синхронизации;
    - клиентская авторизация (учетки пользовотелей, токена);

## Структура проекта
- `src/CloudNotes.Desktop/` — основное приложение
  - `Model/` — модели данных (Note, Tag, NoteListItem)
  - `ViewModel/` — вью-модели (MVVM)
  - `Views/` — AXAML представления
  - `Services/` — сервисы (NoteService, DbContextProvider)
  - `Data/` — контекст базы данных (EF Core)
  - `Migrations/` — миграции БД
- `tests/` — юнит-тесты (xUnit)
- `docs/` — документация (CODESTYLE.md)

## Приблизительная структура таблиц БД

Users: 
id: UUID, PK
email: TEXT, UNIQUE NOT NULL,
login: TEXT, NOT NULL,
hash_password: TEXT, NOT NULL

Notes:
id: UUID PK,
user_id: UUID, SC,
title: TEXT,
content: TEXT,
tags: TEXT[],
updated_at: TIMESTAMP,
synced_at: TIMESTAMP

## Правила кодирования
- Следовать стилю из docs/CODESTYLE.md
- Использовать async/await для операций с БД
- ViewModels наследуются от базовых классов с INotifyPropertyChanged

## Текущий статус
- Ветка: feature/hotkeys — добавление горячих клавиш

## Задачи по текущему этапу
### Этап 1 (локальная десктопная версия)

1. Базовый UI
    - Окно приложения: список заметок слева, редактор справа; - Готово
    - Основные кнопки: Создать, через контекстное меню можно удалять, переименовывать, добавлять в избранное; - Готово
    - Хоткеи:  Ctrl+N, Ctrl+S, Ctrl+D; - Готово
2. Локальное хранилище
    - SQLite локально + EF Core;
    - Логика CRUD-операций;
    - Локальный timestamp для последующей синхронизации.
3. Markdown
    - Подключить библиотеку Markdig для рендеринга мд;
    - Автоприменение стилей после ввода.

